{"version":3,"sources":["Auth/Auth.module.css","share/PostContext.js","Showing Note/Note.js","Showing Note/ShowNote.js","Updating Note/UpdateNote.js","Adding Note/AddNote.js","Header/Header.js","Footer/Footer.js","Auth/Auth.js","App.js","index.js"],"names":["module","exports","PostContext","React","createContext","logIn","logOut","isLoading","isLoggedIn","posts","addPost","deletePost","updatePost","PostContextProvider","props","useState","setPosts","setLoading","setIsLoggedIn","useEffect","a","fetch","credentials","ok","res","json","data","initialPosts","Error","localStorage","getItem","JSON","parse","reversedArray","reverse","setItem","stringify","_id","item","des","date","Date","getTime","loadData","context","method","then","console","log","options","headers","body","status","prev","id","catch","err","message","time","newPosts","Math","ceil","random","toString","filter","x","map","Provider","value","children","Note","useContext","getDate","getMonth","getFullYear","className","onClick","ShowNote","UpdateNote","update","setUpdate","inputRef","useRef","length","onChange","e","target","current","focus","oldDes","find","hidden","defaultValue","ref","type","name","placeholder","autoComplete","preventDefault","trim","alert","AddNote","input","setInput","expanded","setExpanded","titleRef","handleInputChange","Header","isActive","to","Footer","Auth","usernameRef","passwordRef","navigate","useNavigate","registering","setRegistering","loginOrRegister","styles","mainAuth","toggleAuth","htmlFor","submitAuth","username","password","replace","href","App","style","path","element","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.9b3d1305.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"mainAuth\":\"Auth_mainAuth__31C1t\",\"toggleAuth\":\"Auth_toggleAuth__3B4hF\",\"submitAuth\":\"Auth_submitAuth__3K4-I\"};","import React, { useEffect, useState } from \"react\";\r\n\r\nconst PostContext = React.createContext({\r\n  logIn: () => {},\r\n  logOut: () => {},\r\n  isLoading: false,\r\n  isLoggedIn: false,\r\n  posts: [],\r\n  addPost: () => {},\r\n  deletePost: () => {},\r\n  updatePost: () => {}\r\n});\r\n\r\nfunction PostContextProvider(props) {\r\n  const [posts, setPosts] = useState([]);\r\n  const [ isLoading, setLoading ] = useState(false);\r\n  const [ isLoggedIn, setIsLoggedIn ] = useState(false);\r\n  \r\n  // USE EFFECT\r\n  useEffect(() => {\r\n    async function loadData() {\r\n      setLoading(true);\r\n      let initialPosts;\r\n      // Trying getting data from server first if authenticated\r\n      try {\r\n        const response = await fetch(\"/user\",{credentials:\"include\"});\r\n        if (response.ok) {\r\n          const res = await fetch(\"/posts\",{credentials:\"include\"});\r\n          const data = await res.json();\r\n          initialPosts = data;\r\n          setIsLoggedIn(true);\r\n        } else {\r\n          throw new Error(\"offline mode activated\")\r\n        }\r\n      // If not authenticated then get data from local storage or just use default posts\r\n      } catch (err) {\r\n        if (localStorage.getItem(\"myPostIt\")) {\r\n          initialPosts = JSON.parse(localStorage.getItem(\"myPostIt\"));\r\n          // if never updated... 1.0.1\r\n          if (!localStorage.getItem(\"myPostItUpdate\")) {\r\n            const reversedArray = [...initialPosts].reverse();\r\n            localStorage.setItem(\"myPostIt\", JSON.stringify(reversedArray));\r\n            initialPosts = reversedArray;\r\n            localStorage.setItem(\"myPostItUpdate\", JSON.stringify({reversedArray: true}));\r\n          }\r\n        } else {\r\n          initialPosts = [\r\n            {_id: \"1\",item: \"โพสต์แรกของฉัน\", des:\"ดูแลสุขภาพด้วยงับ\", date: new Date().getTime()},\r\n            {_id: \"2\",item: \"ประชุมเช้า\", des:\"วันพุธ เข้าzoomก่อน 10 โมง\", date: new Date().getTime()},\r\n            {_id: \"3\",item: \"จันทร์หน้า\", des:\"ทำ OT ...\", date: new Date().getTime()},\r\n            {_id: \"4\",item: \"หยุดปีใหม่\", des:\"วันศุกร์หน้าแล้ว!\", date: new Date().getTime()}\r\n          ];\r\n          localStorage.setItem(\"myPostIt\", JSON.stringify(initialPosts));\r\n          localStorage.setItem(\"myPostItUpdate\", JSON.stringify({reversedArray: true}));\r\n        }\r\n        setIsLoggedIn(false);\r\n      }\r\n      setLoading(false);\r\n      setPosts(initialPosts);\r\n    }\r\n    //trigger the function\r\n    loadData();\r\n  },[isLoggedIn])\r\n\r\n  // LOG IN\r\n  function logIn() {\r\n    setIsLoggedIn(true);\r\n  }\r\n\r\n  // LOG OUT\r\n  function logOut() {\r\n    fetch(\"/logout\", {credentials:\"include\", method:\"POST\"})\r\n    .then(res => {\r\n      if (res.ok) {\r\n        console.log(\"logged out successfully\");\r\n        setIsLoggedIn(false);\r\n      }\r\n    })\r\n  }\r\n\r\n  // ADD A POST\r\n  function addPost(item, des) {\r\n    if (isLoggedIn) {\r\n      const options = {\r\n        method:\"POST\",\r\n        headers: {\"Content-Type\": \"application/json\"},\r\n        body: JSON.stringify({item:item,des:des}),\r\n        credentials: \"include\"\r\n      }\r\n      fetch(\"/posts\", options)\r\n      .then((res) => {\r\n        if (res.ok) {\r\n          return res.json()\r\n        } else if (res.status === 400) {\r\n          throw new Error(\"title is requied.\")\r\n        } else if (res.status === 403) {\r\n          setIsLoggedIn(false);\r\n          throw new Error(\"no authentication\");\r\n        }\r\n      })\r\n      .then(data => {\r\n        setPosts(prev => {\r\n          return [...prev,{\r\n            _id: data.id,\r\n            item: item,\r\n            des: des,\r\n            date: data.date,\r\n          }]\r\n        })\r\n      })\r\n      .catch((err) => console.log(err.message))\r\n      return;\r\n    }\r\n    const time = new Date().getTime();\r\n    const newPosts = [\r\n      ...posts,{\r\n        _id: Math.ceil(Math.random() * new Date().getTime() * time).toString(),\r\n        item: item,\r\n        des: des,\r\n        date: time,\r\n      }\r\n    ];\r\n    setPosts(newPosts);\r\n    localStorage.setItem(\"myPostIt\", JSON.stringify(newPosts));\r\n  }\r\n\r\n  // DELETE A POST\r\n  function deletePost(id) {\r\n    if (isLoggedIn) {\r\n      fetch(\"/posts/\"+ id, {method:\"DELETE\", credentials: \"include\"})\r\n      .then((res) => {\r\n        if (res.ok) {\r\n          setPosts(prev => {\r\n            return prev.filter((x) => x._id.toString() !== id.toString());\r\n          })\r\n        } else if (res.status === 403) {\r\n          setIsLoggedIn(false);\r\n          throw new Error(\"no authentication\");\r\n        } else {\r\n          throw new Error(\"deleting failed.\")\r\n        }\r\n      })\r\n      .catch(err => console.log(\"Delete Error:\", err.message));\r\n      return;\r\n    }\r\n    const newPosts = posts.filter((x) => x._id.toString() !== id.toString());\r\n    setPosts(newPosts);\r\n    localStorage.setItem(\"myPostIt\", JSON.stringify(newPosts));\r\n  }\r\n\r\n  //EDIT A POST\r\n  function updatePost(id, des) {\r\n    if (isLoggedIn) {\r\n      const options = {\r\n        method:\"PATCH\",\r\n        headers: {\"Content-Type\": \"application/json\"},\r\n        body: JSON.stringify({des:des}),\r\n        credentials: \"include\"\r\n      }\r\n      fetch(\"/posts/\"+id, options)\r\n      .then(res => {\r\n        if(res.ok) {\r\n          setPosts(prev => {\r\n            return prev.map((x) => (x._id.toString() === id.toString() ? { ...x, des: des } : x))\r\n          })\r\n        } else if (res.status === 403) {\r\n          setIsLoggedIn(false)\r\n          throw new Error(\"no authentication\")\r\n        } else {\r\n          throw new Error(\"updating failed.\")\r\n        }\r\n      })\r\n      .catch(err => console.log(err.message));\r\n      return;\r\n    }\r\n    const newPosts = posts.map((x) => (x._id.toString() === id.toString() ? { ...x, des: des } : x));\r\n    setPosts(newPosts);\r\n    localStorage.setItem(\"myPostIt\", JSON.stringify(newPosts));\r\n  }\r\n\r\n  const context = {\r\n    logIn: logIn,\r\n    logOut: logOut,\r\n    isLoading: isLoading,\r\n    isLoggedIn: isLoggedIn,\r\n    posts: posts,\r\n    addPost: addPost,\r\n    deletePost: deletePost,\r\n    updatePost: updatePost,\r\n  };\r\n\r\n  return (\r\n    <PostContext.Provider value={context}>\r\n      {props.children}\r\n    </PostContext.Provider>\r\n  );\r\n}\r\n\r\nexport default PostContext;\r\nexport { PostContextProvider };\r\n","import React, { useContext } from \"react\";\r\nimport DeleteIcon from \"@mui/icons-material/Delete\";\r\nimport PostContext from \"../share/PostContext\";\r\n\r\nexport default function Note(props) {\r\n  const { deletePost } = useContext(PostContext);\r\n  function handleDelete() {\r\n    deletePost(props.id);\r\n  }\r\n  const date = new Date(props.date).getDate().toString() + \"/\" + ( new Date(props.date).getMonth() + 1 ).toString() + \"/\" + new Date(props.date).getFullYear().toString() || \"no date described.\";\r\n\r\n  return (\r\n    <div className=\"Item-block\">\r\n      <div className=\"item-block-flex\">\r\n        <div className=\"item-block-flex-heading\">\r\n          <h3>{props.item}</h3>\r\n        </div>\r\n        <div className=\"item-block-flex-body\">\r\n          <p className=\"description-text\">{props.des}</p>\r\n        </div>\r\n        <div className=\"item-block-footer item-block-flex-footer\">\r\n          <p className=\"date-text\">{date}</p>\r\n          <button className=\"delete-button\" onClick={handleDelete}>\r\n            <DeleteIcon />\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}","import React from \"react\";\r\nimport Note from \"./Note\";\r\n\r\nexport default function ShowNote(props) {\r\n  const posts = [...props.posts];\r\n  return (\r\n    <div className=\"Show-item\">      \r\n      {posts.reverse().map((x) => {\r\n        return (\r\n          <Note\r\n            key={x._id}\r\n            id={x._id}\r\n            item={x.item}\r\n            des={x.des}\r\n            date={x.date}\r\n          />\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n}","import React, { useContext, useRef, useState } from \"react\";\r\nimport UpdateIcon from \"@mui/icons-material/UpdateRounded\";\r\nimport PostContext from \"../share/PostContext\";\r\n\r\nexport default function UpdateNote(props) {\r\n  const [update, setUpdate] = useState({ id: \"\", des: \"\" });\r\n  const inputRef = useRef();\r\n  const { updatePost } = useContext(PostContext);\r\n  const posts = [...props.posts];\r\n\r\n  function handleSelectChange(e) {\r\n    const id = e.target.value;\r\n    inputRef.current.focus();\r\n    const oldDes = posts.find(x => x._id === id).des;\r\n    setUpdate((prev) => {\r\n      return { ...prev, des: oldDes };\r\n    });\r\n    setUpdate((prev) => {\r\n      return { ...prev, id: id };\r\n    });\r\n  }\r\n\r\n  function handleDesChange(e) {\r\n    const des = e.target.value;\r\n    setUpdate((prev) => {\r\n      return { ...prev, des: des };\r\n    });\r\n  }\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    const id = update.id.trim();\r\n    const des = update.des.trim();\r\n    // There is no new description.\r\n    if (id.length === 0) {\r\n      alert(\"โปรดระบุโพสต์ที่ต้องการอัปเดต\");\r\n      return;\r\n    }\r\n    // There is no new description.\r\n    if (des.length === 0) {\r\n      alert(\"โปรดระบุรายละเอียดการอัปเดต\");\r\n      return;\r\n    }\r\n    // Description is longer than 90 characters.\r\n    if (des.length > 90) {\r\n      alert(\"รายละเอียดยาวเกินไป\");\r\n      return;\r\n    }\r\n    updatePost(id,des);\r\n    setUpdate((prev) => {\r\n      return { ...prev, des: \"\" };\r\n    });\r\n  }\r\n\r\n  if (posts.length === 0) {\r\n    return (\r\n      <div className=\"no-posts-update\">\r\n        <p>โพสต์อิทกันเลย!</p>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className=\"Update-item\">\r\n      <form>\r\n        <select value={update.id} onChange={handleSelectChange}>\r\n\r\n          <option hidden defaultValue>\r\n            เลือกโพสต์\r\n          </option>\r\n\r\n          {posts.reverse().map((x) => (\r\n            <option key={x._id} value={x._id}>\r\n              {x.item}\r\n            </option>\r\n          ))}\r\n        </select>\r\n\r\n        <input\r\n          className=\"install-font\"\r\n          ref={inputRef}\r\n          onChange={handleDesChange}\r\n          value={update.des}\r\n          type=\"text\"\r\n          name=\"des\"\r\n          placeholder=\"อัปเดตโพสต์\"\r\n          autoComplete=\"off\"\r\n        ></input>\r\n\r\n        <button onClick={handleSubmit}>\r\n          <UpdateIcon />\r\n        </button>\r\n      </form>\r\n    </div>\r\n  );\r\n}","import React, { useState, useRef, useContext } from \"react\";\r\nimport AddIcon from \"@mui/icons-material/Add\";\r\nimport PostContext from \"../share/PostContext\";\r\n\r\nexport default function AddNote(props) {\r\n  const [input, setInput] = useState({ item: \"\", des: \"\" });\r\n  const [expanded, setExpanded] = useState(false);\r\n  const titleRef = useRef();\r\n  const { addPost } = useContext(PostContext);\r\n\r\n  function handleInputChange(e) {\r\n    const { name, value } = e.target;\r\n    setInput((prev) => {\r\n      return { ...prev, [name]: value };\r\n    });\r\n  }\r\n\r\n  function handleInputOn() {\r\n    if (expanded === false) {\r\n      setExpanded(true);\r\n    }\r\n  }\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    const item = input.item.trim();\r\n    const des = input.des.trim();\r\n    // FAILED\r\n    // Fill(s) is/are blanks.\r\n    if (item === \"\") {\r\n      alert(\"กรุณาระบุหัวข้อ\");\r\n      return;\r\n    }\r\n    // Title is longer than 20 characters.\r\n    if (item.length > 20) {\r\n      alert(\"หัวข้อยาวเกินไป\");\r\n      return;\r\n    }\r\n    // Description is longer than 90 characters.\r\n    if (des.length > 90) {\r\n      alert(\"รายละเอียดยาวเกินไป\");\r\n      return;\r\n    }\r\n\r\n    // SUCCESS\r\n    addPost(item, des);\r\n    setInput({ item: \"\", des: \"\" });\r\n    titleRef.current.focus();\r\n    return;\r\n  }\r\n\r\n  return (\r\n    <div className=\"Add-item\">\r\n      <form>\r\n        <div className=\"Two-input\">\r\n          <input\r\n            className=\"install-font\"\r\n            id=\"First-input\"\r\n            onChange={handleInputChange}\r\n            onClick={handleInputOn}\r\n            value={input.item}\r\n            type=\"text\"\r\n            name=\"item\"\r\n            placeholder={expanded ? \"หัวข้อ\" : \"โพสต์อิท !\"}\r\n            autoComplete=\"off\"\r\n            ref={titleRef}\r\n          ></input>\r\n\r\n          {expanded && (\r\n            <input\r\n              className=\"install-font\"\r\n              id=\"Second-input\"\r\n              onChange={handleInputChange}\r\n              value={input.des}\r\n              type=\"text\"\r\n              name=\"des\"\r\n              placeholder=\"รายละเอียด\"\r\n              autoComplete=\"off\"\r\n            ></input>\r\n          )}\r\n        </div>\r\n        <button\r\n          type=\"submit\"\r\n          onClick={handleSubmit}\r\n        >\r\n          <AddIcon />\r\n        </button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { NavLink } from \"react-router-dom\";\r\n\r\nexport default function Header() {\r\n  return (\r\n    <div className=\"main-nav\">\r\n      <NavLink\r\n        className={({ isActive }) => (isActive ? \"route-active\" : \"route\")}\r\n        to=\"/\"\r\n      >\r\n        โพสต์อิท\r\n      </NavLink>\r\n      <NavLink\r\n        className={({ isActive }) => (isActive ? \"route-active\" : \"route\")}\r\n        to=\"/update\"\r\n      >\r\n        อัปเดต\r\n      </NavLink>\r\n      <NavLink\r\n        className={({ isActive }) => (isActive ? \"route-active\" : \"route\")}\r\n        to=\"/authentication\"\r\n      >\r\n        ผู้ใช้งาน\r\n      </NavLink>\r\n    </div>\r\n  );\r\n}","import React from 'react'\r\n\r\nexport default function Footer() {\r\n    return (\r\n        <footer className=\"footer\">\r\n            <p>Copyright 2021 © created and designed by Kiart Tantasi</p>\r\n        </footer>\r\n    )\r\n}\r\n","import React, { useContext, useRef, useState } from 'react'\r\nimport PostContext from '../share/PostContext';\r\nimport styles from \"./Auth.module.css\";\r\nimport { useNavigate } from \"react-router-dom\"\r\n\r\nexport default function Auth() {\r\n    const { isLoggedIn, logIn, logOut } = useContext(PostContext);\r\n    const usernameRef = useRef(\"\");\r\n    const passwordRef = useRef(\"\");\r\n    const navigate = useNavigate();\r\n\r\n    const [ registering, setRegistering ] = useState(false);\r\n    let loginOrRegister = (registering) ? \"ลงทะเบียน\" : \"เข้าสู่ระบบ\";\r\n    function handleToggle() {\r\n        setRegistering(!registering);\r\n    }\r\n    function handleLogIn(e) {\r\n        e.preventDefault();\r\n        const username = usernameRef.current.value;\r\n        const password = passwordRef.current.value;\r\n        if (!username || !password) {\r\n            alert(\"โปรดระบุ username และ password\")\r\n            return;\r\n        }\r\n        const options = {\r\n            method:\"POST\",\r\n            headers: {\"Content-Type\": \"application/json\"},\r\n            body: JSON.stringify({username:username, password:password}),\r\n            credentials: \"include\"\r\n        }\r\n        // register\r\n        if (registering) {\r\n            fetch(\"/register\", options)\r\n            .then(res => {\r\n                if (res.ok) {\r\n                    console.log(\"registered successfully\");\r\n                    logIn();\r\n                } else if (res.status === 403) {\r\n                    alert(\"username นี้ถูกใช้งานแล้ว\");\r\n                } else {\r\n                    alert(\"การลงทะเบียนล้มเหลว\")\r\n                }\r\n            })\r\n            return;\r\n        }\r\n        // log in\r\n        fetch(\"/login\", options)\r\n        .then(res => {\r\n            if (res.ok) {\r\n                console.log(\"logged in successfully\");\r\n                logIn();\r\n                navigate(\"/\",{ replace: true });\r\n            } else {\r\n                alert(\"username หรือ password ไม่ถูกต้อง\")\r\n            }\r\n        })\r\n    }\r\n\r\n    if (!isLoggedIn) {\r\n        return (\r\n            <div className={styles.mainAuth}>\r\n                <button className={styles.toggleAuth} onClick={handleToggle}>ต้องการ{(registering) ? \"เข้าสู่ระบบ\" : \"สมัครใช้งาน\"}</button>\r\n                <br/><br/>\r\n                <form>\r\n                    <label htmlFor=\"username\">username</label>\r\n                    <br/>\r\n                    <input type=\"text\" ref={usernameRef} name=\"username\" autoComplete=\"off\" />\r\n                    <br/><br/>\r\n                    <label htmlFor=\"password\">password</label>\r\n                    <br/>\r\n                    <input type=\"password\" ref={passwordRef} name=\"password\" autoComplete=\"off\" />\r\n                    <br/><br/>\r\n                    <button className={styles.submitAuth} onClick={handleLogIn} type=\"submit\">{loginOrRegister}</button>\r\n                    <br/><br/>\r\n                    <button><a href=\"/auth\">เข้าสู่ระบบ/สมัครโดย GOOGLE ACCOUNT</a></button>\r\n                </form>\r\n            </div>\r\n        )\r\n    }\r\n    return (\r\n        <div className={styles.mainAuth}>\r\n            <h1> POST IT APP </h1>\r\n            <br/>\r\n            <button onClick={logOut}>Log Out</button>\r\n            <br/><br/>\r\n        </div>\r\n    )\r\n}\r\n","import \"./css/App.css\"\r\nimport \"./css/Media-Query.css\";\r\nimport React, { useContext } from \"react\";\r\nimport ShowNote from \"./Showing Note/ShowNote\";\r\nimport UpdateNote from \"./Updating Note/UpdateNote\";\r\nimport AddNote from \"./Adding Note/AddNote\";\r\nimport Header from \"./Header/Header\";\r\nimport Footer from \"./Footer/Footer\";\r\nimport { Routes, Route } from \"react-router-dom\";\r\nimport PostContext from \"./share/PostContext\";\r\nimport Auth from \"./Auth/Auth\";\r\n\r\nexport default function App() {\r\n\r\n  const { isLoading } = useContext(PostContext);\r\n  const { posts } = useContext(PostContext);\r\n\r\n  if (isLoading) {\r\n    return <div>\r\n      <h1 style={{\"textAlign\":\"center\",\"marginTop\":\"30px\"}}>LOADING...</h1>\r\n    </div>\r\n  }\r\n\r\n  return (\r\n    <div className=\"flex-container\">\r\n      <Header />\r\n      <div className=\"flex-main-body\">\r\n      <Routes>\r\n        <Route path=\"/\" element={<div><AddNote /><ShowNote posts={posts} /></div>} />\r\n        <Route path=\"/update\" element={<div><UpdateNote posts={posts} /><ShowNote posts={posts} /></div> } />\r\n        <Route path=\"/authentication\" element={<Auth />} />\r\n      </Routes>\r\n      </div>\r\n      <Footer />\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { BrowserRouter } from \"react-router-dom\";\r\nimport App from \"./App\";\r\nimport { PostContextProvider } from \"./share/PostContext\";\r\n\r\nReactDOM.render(\r\n  <PostContextProvider>\r\n    <React.StrictMode>\r\n      <BrowserRouter>\r\n        <App />\r\n      </BrowserRouter>\r\n    </React.StrictMode>\r\n  </PostContextProvider>,\r\n  document.getElementById(\"root\")\r\n);\r\n"],"sourceRoot":""}